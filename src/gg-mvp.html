<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="main-styles.html">
<dom-module id="gg-mvp">
    <template>
        <style include="main-styles">
            :host {
                display: block;
                padding: 10px;
                text-align: center;
            }
            paper-card {
                text-align: center;
                /*--paper-card-background-color: var();*/
            }
            paper-card:hover {
                @apply(--shadow-elevation-6dp);
            }
        </style>
        <div class="card">
            <h1>Global Grid MVP</h1>
            <paper-input label="My Name" value="{{udata.name}}"></paper-input>
            <paper-input label="Increment in Degrees" value="{{settings.increment}}"></paper-input>
            <paper-input label="Max Distance in KM ([[convertKMtoFT(settings.maxTolerableDistanceInKm)]]ft)" value="{{settings.maxTolerableDistanceInKm}}"></paper-input>
            <paper-input label="Idle Time" value="{{settings.idleTime}}"></paper-input>
            <h2>Sector ID</h2>
            <h3>[[udata.sector]]</h3>
            <h2>Location</h2>
            <h3>[[la]], [[lg]]</h3>
            <h2># of people inside Sector ID</h2>
            <h3>[[getNumInSector(others, udata.sector)]]</h3>
            <h2>Distances of people around you</h2>
            <h3>You: [[udata.name]] - 0 km</h3>
            <!--<template is="dom-repeat" items="{{getPeopleInSector(others, udata.sector)}}" as="item" index-as="index" filter="isHandler" sort="sortHandler" observe="itemField1 itemField2">
                 {{item}} and {{index}} can be used in this binding scope
                <h3>[[index]]: [[item]] - 0 km</h3>
            </template>-->

            <!--<h2># of people inside Sector who are Idle</h2>
            <h3>0</h3>
            <paper-card heading="User Status" elevation="1" animated-shadow="true">
                <h1>[[status]]</h1>
            </paper-card>-->
        </div>
    </template>
    <script>
        class GGMvp extends Polymer.Element {
            static get is() { return 'gg-mvp'; }
            static get properties() {
                return {
                    la: {
                        notify: true
                    }, lg: {
                        notify: true
                    }, lh: {
                        notify: true
                    }
                };
            }
            convertKMtoFT(km) {
                return Math.round(km/0.0003048);
            }
            getPeopleInSector(locations, sector) {
                console.log("==========================PEOPLE IN SECTOR FUNCTIN==========================");
                console.log("locations");
                console.log(locations);
                console.log("sector");
                console.log(sector);
                console.log("isGood(sector)");
                console.log(isGood(sector));
                console.log("isGood(locations)");
                console.log(isGood(locations));
                if(isGood(locations[sector])) {
                    console.log("Object.keys(locations[sector])");
                    console.log(Object.keys(locations[sector]));
                }
                console.log("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");
                return (isGood(locations) && isGood(sector) && isGood(locations[sector]))?Object.keys(locations[sector]):["You"];
            }
            getNumInSector(locations, sector) {
                console.log("==========================NUM PEOPLE IN SECTOR FUN==========================");
                console.log("locations");
                console.log(locations);
                console.log("sector");
                console.log(sector);
                console.log("isGood(sector)");
                console.log(isGood(sector));
                console.log("isGood(locations)");
                console.log(isGood(locations));
                console.log("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");
                return this.getPeopleInSector(locations, sector).length;
            }
        }
        window.customElements.define(GGMvp.is, GGMvp);
    </script>
</dom-module>